\tikzstyle{ops} = [alt=<{#1}>{opacity = 1}{opacity = 0}]

\begin{tikzpicture}
    \draw[thick, rounded corners = 2pt] (0, 0) rectangle (4, 3);
    \node at (-1, 1.5) {$Y \coloneqq \{0, 1\}^{n k}$};
    \node at (5, 1.5) {};
    \node at (2, 3.3) {$Z \coloneqq \{0, 1\}^{n \ell}$};

    \draw[red!30, fill = red!10, rounded corners = 3pt] (0.3, 0.1) rectangle (1, 2.9)
        node[midway, red!80] {$D_1$};
    \draw[green!50!black, fill = green!30, rounded corners = 3pt, opacity = 0.5] (0.5, 0.4) rectangle
        (3.5, 0.9) node[midway, green!20!black] {$D_2$};
    \draw[blue!50!black, fill = blue!30, rounded corners = 3pt, opacity = 0.5] (0.7, 2) rectangle
        (3.4, 2.85) node[midway, blue!20!black] {$D_3$};
    \draw[ops = 6, very thick, red] (-1, 0.5) -- (5, 0.5);
    \draw[ops = 7, very thick, red] (3, -0.5) -- (3, 3.5);
\end{tikzpicture}