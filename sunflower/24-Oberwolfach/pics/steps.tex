\tikzset{
    vert/.style = {
        circle,
        thick,
        minimum size = 0.5cm
    },
    fancy-arrow/.style = {
        draw = black,
        thick,
        single arrow,
        right color = green!40!black,
        left color = red!40!black,
        fill opacity = 0.7,
        single arrow head extend = 0.3cm,
        single arrow tip angle = 70,
        single arrow head indent = 0.15cm,
        minimum height = 1.4cm,
        minimum width = 1cm,
        shading angle = -45,
        rotate = -90
    },
    common-part/.pic = {
        \draw[thick] (0, 0) rectangle (\a, \a);
        \draw[thick] (0, 0) -- (\a, \a);

        \node at (0.5, \a - 0.5) {\Large $0$};
        \node at (\a - 0.5, 0.5) {\Large $1$};

        \foreach \i in {1, 2, ..., 5}{
            \draw[thick, ->] (a) -- (b\i);
        }
    },
}
    
\begin{tikzpicture}[>=latex, scale = 0.9]
    \def\a{4}


    \fill[red!70!black, opacity = 0.3] (0, 0) -- (\a, \a) -- (\a, 0) -- cycle;
    \fill[green!50!black, opacity = 0.3] (0, 0) -- (\a, \a) -- (0, \a) -- cycle;

    \begin{scope}[shift = {(8.5, 0)}]
        \node[draw, vert, color = green!40!black, fill = green!20] (a) at (0, \a - 0.5)
            {\textcolor{black}{$\land$}};

        \node[draw, vert, ellipse] (b1) at (-3, \a - 2.5) {$n^{\varepsilon}$-DNF};
        \node[vert] (b2) at (-1.5, \a - 2.5) {};
        \node[draw, vert, ellipse] (b3) at (0, \a - 2.5) {$n^{\varepsilon}$-DNF};
        \node[vert] (b4) at (1.5, \a - 2.5) {};
        \node[draw, vert, ellipse] (b5) at (3, \a - 2.5) {$n^{\varepsilon}$-DNF};

        \foreach \i in {1, 2, ..., 5}{
            \draw[thick, ->] (a) -- (b\i);
        }

        \draw[<->, thick, blue] (0, \a - 0.5) ++(-165:0.9) arc (-160:-15:0.9) coordinate (c);
        \draw (c) ++(0.5, 0) node {\textcolor{blue}{$2^{n^{\varepsilon}}$}};
    \end{scope}

    \pic[scale = 0.9] {common-part};

    \begin{scope}[shift = {(0, -\a - 0.5)}, alt = <1>{opacity = 0}{}]
        \fill[red!70!black, opacity = 0.3, alt = <1>{opacity = 0}{}] (0, 0) -- (\a, \a) -- (\a, 0) -- cycle;
        \draw[green!50!black, thick, fill = green!50!black,
            fill opacity = 0.3, alt = <1>{opacity = 0}{}]
            (1.1, 1.2) -- (2.2, 2.3) to[out = 45, in = 40] (1.3, 2.3) to[out = 220, in = 225] cycle;
        \node[green!50!black] at (1.3, 3) {\small $|Y| = 2^n / 2^{n^{\varepsilon}}$};
        \node[green!50!black] at (1.5, 2) {\small $Y$};
        \draw[->, green!50!black, thick] (0.5, 2.8) to[out = -90, in = 140] (1, 2.1);

        \begin{scope}[shift = {(8.5, 0)}]
            \node[draw, vert] (a) at (0, \a - 0.5) {$\land$};

            \node[draw, vert, ellipse, color = green!40!black, fill = green!20] (b1) at (-3, \a - 2.5)
                {$n^{\varepsilon}$-DNF};
            \node[vert] (b2) at (-1.5, \a - 2.5) {};
            \node[draw, vert, ellipse] (b3) at (0, \a - 2.5)
                {$n^{\varepsilon}$-DNF};
            \node[vert] (b4) at (1.5, \a - 2.5) {};
            \node[draw, vert, ellipse] (b5) at (3, \a - 2.5) {$n^{\varepsilon}$-DNF};


            \draw[<->, thick, blue] (0, \a - 0.5) ++(-165:0.9) arc (-160:-15:0.9) coordinate (c);
            \draw (c) ++(0.5, 0) node {\textcolor{blue}{$2^{n^{\varepsilon}}$}};
        \end{scope}

        \pic[scale = 0.9] {common-part};

        \draw[alt = <{3-}>{}{opacity = 0}, fill] (1.5, 1) circle
            (0.03) node[right] {$a$};
        \draw[alt = <{3-}>{}{opacity = 0}, thick, blue!40!black]
            (1.5, 1) circle (0.6) node[above right = 0.5] {$S$};
    \end{scope}
\end{tikzpicture}