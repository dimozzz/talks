\begin{tikzpicture}
    \def\elements{{
            {1, 1, 0, 1, 1},
            {0, 1, 0, 1, 0},
            {1, 1, 1, 1, 1},
            {0, 1, 1, 1, 0},
            {1, 1, 1, 0, 1},
            {0, 1, 0, 1, 1},
            {1, 1, 1, 0, 1},
            {0, 0, 1, 0, 0},
            {1, 1, 1, 1, 1}
        }}
    \def\result{{1, 0, 1, 1, 1, 1, 1, 0, 1}} 
    \def\n{10}
    \def\m{5}
    \def\step{0.65}

    \fill[gray!50, rounded corners = 3pt] (-0.08, 0.08) rectangle
        ({\step * (\n + 1) + 0.08}, {-\step * (\m + 1) - 0.08});
    \fill[white] (0, 0) rectangle ({\step * (\n + 1)}, {-\step * (\m + 1)}); 
    \draw[step = \step, thick] (0, 0) grid ({\step * (\n + 1)}, {-\step * (\m + 1)});
    \node at ({\step * 4}, {-\step * (\m + 1) - 0.56}) {};

    \only<3->{
        \draw[thick, green!30!black, rounded corners = 2pt, fill = green!80, fill opacity = 0.2]
            ({-0.02 + \step * 2}, 0.02) rectangle ({\step * 6 + 0.02}, {-\step * (\m + 1) - 0.02});
        \node at ({\step * 4}, {-\step * (\m + 1) - 0.4}) {$I$};
    }
    
    \only<4->{
        \draw[thick, green!30!black, rounded corners = 2pt, fill = red, fill opacity = 0.2]
            ({-0.02 + \step * 2}, {-\step * 3 + 0.02}) rectangle ({\step * 6 + 0.02}, {-\step * 4 + 0.02});
        \foreach \i in {2, 3, 4, 5}{
            \node at ({\step / 2 + \i * \step}, {-\step / 2 - 3 * \step}) {$1$};
        }
    }

 
    \node at (-0.5, {-\step * (\m + 1) / 2}) {\Large $X$};
    \node at ({\step * (\n + 1) + 0.5}, {-\step * (\m + 1) / 2}) {};

\end{tikzpicture}